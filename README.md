# devops-netology


    1. Подсчитайте, какого размера нужно окно TCP чтобы наполнить 1 Гбит/с канал при 300 мс RTT (берем простую ситуацию без потери пакетов).
        37500 Кбит

    2. Во сколько раз упадет пропускная способность канала, если будет 1% потерь пакетов при передаче?
        MSS = 1460 byte = 1460*8*10^(-6) Mbit
        RTT = 300 ms = 0,3 s
        C = 1
        Loss1 = (10^(-6))% = 10^(-8)
        Loss2 = 1% = 10^(-2)
        network limit =  (MSS/RTT)*(C/sqrt(Loss))
        network limit1 =  (1460*8*10^(-6)/300^(-3))*(1/sqrt(10^(-8))) =  389,33 Mbit/s
        network limit2 =  (1460*8*10^(-6)/300^(-3))*(1/sqrt(10^(-2))) = 0,38933 Mbit/s
        network limit1/network limit2 = 389,33/0,38933 = 1000
        
        Пропускная способность упадет в 1000 раз
    
    3. Какая максимальная реальная скорость передачи данных достижима при линке 100 Мбит/с? 
        Вопрос про TCP payload, то есть цифры, которые вы реально увидите в операционной системе в тестах или в браузере при скачивании файлов. 
        Пусть IP package = 1500 bytes
        тогда Ethernet frame = Ethernet header +  IP package + Ethernet trailer 
        Ethernet frame = 14 + 1500 + 4 =  1518 bytes
        TCP payload = Ethernet frame - IP header - TCP header
        TCP payload = 1528 - 20 - 20 = 1488 bytes
        Всего переданных Ethernet frame за 1с  N = (100*1024*1024)/1518 ~= 69076
        Реальная скорость передачи 69076*1488 = 98 Мбит/с 
        Повлияет ли размер фрейма на это?
        Да, повлияет, чем меньще размер фрейма, тем меньше реальная скорость передачи данных.
        Например, при Ethernet frame = 64 реальная скорость передачи будет 37,5 Мбит/с
        
    4. Что на самом деле происходит, когда вы открываете сайт?  Опишите максимально подробно насколько вы это можете сделать,
        что происходит, когда вы делаете запрос curl -I http://netology.ru
    
        1. Начинается резолвиться ip адрес netology.ru
        2. Имя проверяется локально в /etc/hosts, запись в нем отсутствует
        3. Отправляется ARP-запрос на IP-адрес шлюза по умолчанию, тк DNS-сервер находится в другой подсети.
            IP DNS берется из файла /etc/resolv.conf
            Далее ARP-запросы будут создаваться в разных подсетях, пока не обнаружится та, в которой находится 
            DNS-сервер
        4. Порт 53 открывается для отправки UDP-запроса к DNS-серверу. Если DNS-сервер «не знает» нужный адрес, 
            то запрашивается рекурсивный поиск, который проходит по списку вышестоящих DNS-серверов, пока не будет найден адрес,
            а затем возвращается результат.
        5. После получения IP-адреса берется из URL информацию об используемом порте (http - 80). Выполняется открытие сокета,
            выполняется системный вызов socket(AF_INET, SOCK_STREAM, IPPROTO_TCP),
            формируется запрос 
            GET / HTTP/1.1
            Host: netology.ru
            
            который при добавлении ip и ethernet заголовков и суффиксов становится ethernet фреймом
        6. Установка TCP соединения
        7. Передача запроса
        8. Получение ответа
            HTTP/1.1 301 Moved Permanently
            Date: Thu, 08 Jul 2021 21:52:44 GMT
            Connection: keep-alive
            Cache-Control: max-age=3600
            Expires: Thu, 08 Jul 2021 22:52:44 GMT
            Location: https://netology.ru/
            cf-request-id: 0b29b4f0eb00004985060f7000000001
            Server: cloudflare
            CF-RAY: 66bc8a94ad634985-DME
            alt-svc: h3-27=":443"; ma=86400, h3-28=":443"; ma=86400, h3-29=":443"; ma=86400, h3=":443"; ma=86400
        9. Закрытие соединения
            

    5. Сколько и каких итеративных запросов будет сделано при резолве домена www.google.co.uk?
        использовал команду dig @8.8.8.8 www.google.co.uk +trace
        кажется, что все же резолвит uk. , хотя правильно co.uk. 
        1 .
        2 co.uk.
        3 google.co.uk.
        4 www.google.co.uk.

    6. Сколько доступно для назначения хостам адресов в подсети /25?
        126
        А в подсети с маской 255.248.0.0
        524286 
    
    7. В какой подсети больше адресов, в /23 или /24?
        при /23 512 адресов
        при /24 256 адресов

    8. Получится ли разделить диапазон 10.0.0.0/8 на 128 подсетей по 131070 адресов в каждой? 
        131070 + 2 = 131072 = 2^17 => необходимо 17 бит для адресов. 32 - 17 = 15. 15 бит на подсеть,
        но тк у диапазона маска = 8 => 15 - 8 = 7 имеется на подсеть. 2^7 = 128 подсетей
        Какая маска будет у таких подсетей?
        /15
        